import{_ as Z}from"./nuxt-link.ad1b3ac5.js";import{u as ee}from"./game.8b2c37cb.js";import{b as F}from"./VSelect.a3098a1a.js";import{V as r}from"./VBtn.e95b6ffc.js";import{V as v}from"./VTextField.da37b349.js";import{y as te,r as n,z as le,a as w,l as se,o as m,A as p,B as t,t as a,u as o,D as u,C as c,F as U,M as H,N as ae,x as _,E as C,G as oe,H as ne,I as de}from"./entry.75e5da12.js";import"./VOverlay.8d6a580d.js";import"./dimensions.828db36b.js";import"./router.bbe94cc5.js";import"./transition.20c87304.js";import"./VList.8d44b97f.js";import"./index.bc80bfbd.js";import"./ssrBoot.a1982877.js";import"./VAvatar.727a47c0.js";import"./rounded.42519ff8.js";import"./VImg.1fb1b266.js";import"./index.fcb5bc87.js";import"./VIcon.54c6b0c4.js";import"./dialog-transition.a9096680.js";import"./VChip.bef1ff08.js";const I=k=>(oe("data-v-2acf16d5"),k=k(),ne(),k),ie={class:"container-games"},ue={class:"choose-game"},ce={class:"table-manager"},re={class:"table"},me={class:"header"},pe={class:"row"},_e=["width"],ve={class:"body"},fe={class:"cell -text"},xe={class:"field -text"},be={class:"cell -text"},Ve={class:"field -text"},he={class:"cell -text"},ye={class:"field -text"},Te={class:"cell -text"},we={class:"field -text"},Ce={class:"cell -text"},ke=I(()=>t("span",null,"|",-1)),Ge={class:"cell -text"},ge={class:"cell -text"},Ne={class:"cell -text"},Se={class:"cell -text"},Ue={class:"cell -text"},Le=I(()=>t("span",null,"|",-1)),De={key:0,class:"form-add"},Ee={class:"cell -content"},Ae={class:"cell -tls"},Be={class:"cell -amount"},Ie={class:"cell -btn"},Re=I(()=>t("span",null,"|",-1)),je=te({__name:"index",setup(k){const M=n([{id:2,text:"Nội Dung",width:"10%"},{id:3,text:"Dãy Số Kết Quả",width:"50%"},{id:4,text:"Hệ Số",width:"10%"},{id:5,text:"Cách Tính",width:"10%"},{id:6,text:"Thao Tác",width:"20%"}]),i=ee();le(async()=>{await i.getAllGames(),await i.getAllResultType()});const $=w(()=>i.resultTypeList.map(l=>l._id)),R=w(()=>i.listGames),q=w(()=>{var l;return(l=R.value.find(e=>e._id===V.value))==null?void 0:l.games}),V=n("TX_Game"),z=w(()=>R.value.map(l=>l._id)),f=n(!1),L=n(""),x=n(""),h=n(""),y=n(""),T=n(""),D=n(""),E=n(""),K=l=>f.value&&L.value==l,Q=l=>f.value&&D.value==l,X=l=>E.value==l,J=(l,e)=>{x.value=e.content,h.value=e.numberTLS.join(", "),y.value=e.amount.toString(),T.value=e.resultType,f.value=!0,L.value=l},O=async l=>{D.value=l._id;const e={gameType:l.gameType,content:x.value,betName:x.value,numberTLS:h.value.split(",").map(B=>Number(B)),amount:Number(y.value),resultType:T.value};await i.updateGame(l._id,e),setTimeout(()=>{f.value=!1,L.value="",D.value=""},1e3)},P=async l=>{E.value=l,await i.deleteGame(l),f.value=!1,setTimeout(()=>{E.value=""},1e3)},b=n(""),G=n(""),g=n(""),N=n("end"),S=n(!1),A=n(!1),j=w(()=>i.isExitContentInDB);se(b,async l=>{await i.checkContentExit(l)});const W=async()=>{A.value=!0;const l={gameType:V.value,content:b.value,betName:b.value,numberTLS:G.value.split(",").map(e=>Number(e)),amount:Number(g.value),resultType:N.value};await i.createNewGame([l]),S.value=!1,A.value=!1};return(l,e)=>{const B=Z;return m(),p("div",ie,[t("div",ue,[a(F,{modelValue:o(V),"onUpdate:modelValue":e[0]||(e[0]=s=>u(V)?V.value=s:null),items:o(z),variant:"outlined",label:"Chọn game",class:"game",dense:"",clearable:!1,"return-object":""},null,8,["modelValue","items"]),a(r,{class:"newgame","append-icon":"mdi-plus"},{default:c(()=>[a(B,{to:"/dashboard/games"},{default:c(()=>[_("Tạo mới game")]),_:1})]),_:1})]),t("div",ce,[t("table",re,[t("thead",me,[t("tr",pe,[(m(!0),p(U,null,H(o(M),s=>(m(),p("th",{width:s.width,key:s.id,class:"head"},C(s.text),9,_e))),128))])]),t("tbody",ve,[(m(!0),p(U,null,H(o(q),(s,Y)=>(m(),p("tr",{key:Y,class:"row"},[K(s._id)?(m(),p(U,{key:1},[t("td",Ge,[a(v,{modelValue:o(x),"onUpdate:modelValue":e[1]||(e[1]=d=>u(x)?x.value=d:null),class:"field -text"},null,8,["modelValue"])]),t("td",ge,[a(v,{modelValue:o(h),"onUpdate:modelValue":e[2]||(e[2]=d=>u(h)?h.value=d:null),class:"field -text"},null,8,["modelValue"])]),t("td",Ne,[a(v,{modelValue:o(y),"onUpdate:modelValue":e[3]||(e[3]=d=>u(y)?y.value=d:null),class:"field -text"},null,8,["modelValue"])]),t("td",Se,[a(v,{modelValue:o(T),"onUpdate:modelValue":e[4]||(e[4]=d=>u(T)?T.value=d:null),class:"field -text"},null,8,["modelValue"])]),t("td",Ue,[a(r,{class:"button -update",variant:"text",onClick:d=>O(s),loading:Q(s._id)},{default:c(()=>[_(" Update ")]),_:2},1032,["onClick","loading"]),Le,a(r,{class:"button -cancel",variant:"text",onClick:e[5]||(e[5]=()=>f.value=!1)},{default:c(()=>[_(" Cancel ")]),_:1})])],64)):(m(),p(U,{key:0},[t("td",fe,[t("span",xe,C(s.content),1)]),t("td",be,[t("span",Ve,C(s.numberTLS.join(", ")),1)]),t("td",he,[t("span",ye,C(s.amount),1)]),t("td",Te,[t("span",we,C(s.resultType),1)]),t("td",Ce,[a(r,{class:"button -edit",variant:"text",onClick:d=>J(s._id,s)},{default:c(()=>[_(" Edit ")]),_:2},1032,["onClick"]),ke,a(r,{class:"button -delete",variant:"text",loading:X(s._id),onClick:d=>P(s._id)},{default:c(()=>[_(" Delete ")]),_:2},1032,["loading","onClick"])])],64))]))),128))])])]),o(S)?(m(),p("div",De,[t("div",Ee,[a(v,{modelValue:o(b),"onUpdate:modelValue":e[6]||(e[6]=s=>u(b)?b.value=s:null),class:"field -text",error:o(j),"error-messages":o(j)?["Nội dung đã tồn tại"]:[]},null,8,["modelValue","error","error-messages"])]),t("div",Ae,[a(v,{modelValue:o(G),"onUpdate:modelValue":e[7]||(e[7]=s=>u(G)?G.value=s:null),label:"Dãy số kết quả, ví dụ: 1, 2, 3",class:"field -text"},null,8,["modelValue"])]),t("div",Be,[a(v,{modelValue:o(g),"onUpdate:modelValue":e[8]||(e[8]=s=>u(g)?g.value=s:null),class:"field -text"},null,8,["modelValue"])]),a(F,{modelValue:o(N),"onUpdate:modelValue":e[9]||(e[9]=s=>u(N)?N.value=s:null),items:o($),variant:"outlined",label:"Chọn cách tính kết quả",class:"row",dense:"",clearable:!1,"return-object":""},null,8,["modelValue","items"]),t("div",Ie,[a(r,{class:"button -add",variant:"text",loading:o(A),onClick:W},{default:c(()=>[_(" Thêm Mới ")]),_:1},8,["loading"]),Re,a(r,{class:"button -cancel",variant:"text",onClick:e[10]||(e[10]=()=>S.value=!1)},{default:c(()=>[_(" Huỷ ")]),_:1})])])):ae("",!0),a(r,{class:"btn-add","append-icon":"mdi-plus",onClick:e[11]||(e[11]=()=>S.value=!0)},{default:c(()=>[_(" Tạo mới ")]),_:1})])}}});const ot=de(je,[["__scopeId","data-v-2acf16d5"]]);export{ot as default};
