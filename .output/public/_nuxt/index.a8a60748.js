import{_ as lt}from"./confirm-handle-transaction.fa2e8491.js";import{u as F}from"./transaction.d91f5d8f.js";import{y as R,r as o,z as ct,a as d,l as it,o as p,A as N,B as t,t as u,u as s,D as _,K as rt,L as ut,C as g,x as D,F as E,M as dt,E as i,O as mt,c as H,N as w,G as _t,H as pt,I as j}from"./entry.75e5da12.js";import{u as vt}from"./game.8b2c37cb.js";import{u as ht}from"./app.91f587ac.js";import{g as Tt,e as ft,f as yt}from"./formatters.df209382.js";import{K as O}from"./vue-datepicker.a5e458f6.js";/* empty css             */import{B as gt}from"./constants.d690964f.js";import{b as M}from"./VSelect.a3098a1a.js";import{V as Ct}from"./VCheckbox.a8fa212b.js";import{V as x}from"./VBtn.e95b6ffc.js";import{V as St}from"./VPagination.3e781616.js";import{V as bt}from"./VSnackbar.2a38b56e.js";import{u as kt}from"./admin.9cf31106.js";import"./VDialog.eedd4603.js";import"./VAvatar.727a47c0.js";import"./rounded.42519ff8.js";import"./VImg.1fb1b266.js";import"./index.fcb5bc87.js";import"./transition.20c87304.js";import"./dimensions.828db36b.js";import"./VIcon.54c6b0c4.js";import"./router.bbe94cc5.js";import"./VOverlay.8d6a580d.js";import"./dialog-transition.a9096680.js";import"./VTextField.da37b349.js";import"./index.bc80bfbd.js";import"./VList.8d44b97f.js";import"./ssrBoot.a1982877.js";import"./VChip.bef1ff08.js";const A=T=>(_t("data-v-4a250de7"),T=T(),pt(),T),Vt={class:"search-user"},Nt={class:"content__item"},Dt=A(()=>t("div",{class:"content__item__title"},"Thời Gian Bắt Đầu",-1)),Ht={class:"content__item__input"},wt={class:"content__item"},xt=A(()=>t("div",{class:"content__item__title"},"Thời Gian Kết Thúc",-1)),It={class:"content__item__input"},Bt={class:"container-search"},Pt={class:"table"},$t=A(()=>t("thead",{class:"head"},[t("tr",{class:"row"},[t("th",{class:"cell"},"THỜI GIAN"),t("th",{class:"cell"},"Nick Name"),t("th",{class:"cell"},"Số Tài Khoản"),t("th",{class:"cell"},"Ngân Hàng"),t("th",{class:"cell"},"MGD"),t("th",{class:"cell"},"TIỀN CƯỢC"),t("th",{class:"cell"},"TIỀN THẮNG"),t("th",{class:"cell"},"TRÒ CHƠI"),t("th",{class:"cell"},"MESSAGE"),t("th",{class:"cell"},"CƯỢC"),t("th",{class:"cell"},"KẾT QUẢ"),t("th",{class:"cell"},"TRẠNG THÁI THANH TOÁN TIỀN"),t("th",{class:"cell"},"CALLBACK"),t("th",{class:"cell"},"DETECT")])],-1)),Lt={class:"body"},At={class:"cell"},Gt={class:"cell"},Ut={class:"cell"},Kt={class:"cell"},Et={class:"cell"},Ot={class:"cell"},Mt={class:"cell"},Ft={class:"cell"},Rt={class:"cell"},jt={class:"betName"},qt={class:"cell"},zt={class:"betName"},Qt={class:"cell"},Yt={class:"cell"},Jt={class:"cell"},Wt={class:"cell"},Xt={class:"text-center"},Zt={style:{width:"100%","text-align":"center"}},te=R({__name:"section",setup(T){const l=F(),c=o(1),v=50,r=o("");ct(async()=>{await l.getHistoryTransactionLatest(r.value,c.value,v)});const C=vt(),m=o({gameType:"",name:"Tất cả"}),q=d(()=>[m.value,...C.listGamesDetail]),z=d(()=>{var a;return(a=l.historyTransactionLatest)==null?void 0:a.transactions}),I=d(()=>{var a;return(a=l.historyTransactionLatest)==null?void 0:a.totalPages}),Q=d(()=>I.value?I.value>1:!1),f=o(""),S=o(Tt()),b=o(ft()),k=o(!1),Y=async()=>{console.log(h.value),r.value="",r.value+=f.value?`&nickname=${f.value}`:"",r.value+=m.value.gameType?`&gameName=${m.value.gameType}`:"",h.value.value!==99&&(r.value+=`&statusBank=${h.value.value}`),k.value&&(r.value+=`&startDate=${S.value.toISOString()}`,r.value+=`&endDate=${b.value.toISOString()}`),c.value=1,await l.getHistoryTransactionLatest(r.value,c.value,v)};it(c,async()=>{await l.getHistoryTransactionLatest(r.value,c.value,v)});const B=o(""),y=o(!1),J=d(()=>l.isCallPaymentSuccess),W=d(()=>l.isDetectTransactionSuccess),V=ht(),P=o(""),$=o(""),G=o(""),U=o(""),X=async a=>{V.isOpenConfirmHandleTransaction=!0,P.value="PAYMENT",$.value=`${a.nickname} (${a.bonus})`,G.value=a.nickname,U.value=a.transId},Z=async()=>{const a=G.value,n=U.value;await l.callBackPayment(a,n),await l.getHistoryTransactionLatest(r.value,c.value,v),V.isOpenConfirmHandleTransaction=!1,B.value=l.isCallPaymentSuccess?"Thanh Toán Thành Công":"Thanh Toán Thất Bại, Số tiền quá nhỏ or user không tồn tại",y.value=!0},tt=["Code format invalid","Game not found","User not found"],K=o(""),et=a=>{V.isOpenConfirmHandleTransaction=!0,P.value="DETECT",$.value=a.nickname?`${a.nickname} (${a.bonus})`:a.betValue,K.value=a.transId},at=async()=>{const a={transaction_id:K.value};await l.detectTransaction(a),await l.getHistoryTransactionLatest(r.value,c.value,v),V.isOpenConfirmHandleTransaction=!1,B.value=l.isDetectTransactionSuccess?"Detect Thành Công":"Detect Thành Thất Bại",y.value=!0},nt=a=>{var n;return((n=gt.find(L=>L.value==a))==null?void 0:n.label)??""},st=[{value:99,label:""},{value:1,label:"Đã Thanh Toán "},{value:0,label:"Chưa Thanh Toán"},{value:2,label:"User not found"},{value:4,label:"Pending"},{value:5,label:"Deposit not found"}],h=o({value:99,label:""});return(a,n)=>{const L=lt;return p(),N(E,null,[t("div",Vt,[u(M,{modelValue:s(m),"onUpdate:modelValue":n[0]||(n[0]=e=>_(m)?m.value=e:null),items:s(q),"item-value":"gameType","item-title":"name",variant:"outlined",label:"Loại Game",class:"games",dense:"",clearable:!1,"return-object":""},null,8,["modelValue","items"]),rt(t("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>_(f)?f.value=e:null),class:"input",type:"text",placeholder:"Nhập Nickname để kiểm tra"},null,512),[[ut,s(f)]]),u(M,{modelValue:s(h),"onUpdate:modelValue":n[2]||(n[2]=e=>_(h)?h.value=e:null),items:st,"item-value":"value","item-title":"label",variant:"outlined",label:"Chọn cách tính kết quả",class:"row",dense:"",clearable:!1,"return-object":""},null,8,["modelValue"]),t("div",Nt,[Dt,t("div",Ht,[u(s(O),{modelValue:s(S),"onUpdate:modelValue":n[3]||(n[3]=e=>_(S)?S.value=e:null)},null,8,["modelValue"])])]),t("div",wt,[xt,t("div",It,[u(s(O),{modelValue:s(b),"onUpdate:modelValue":n[4]||(n[4]=e=>_(b)?b.value=e:null)},null,8,["modelValue"])])]),u(Ct,{modelValue:s(k),"onUpdate:modelValue":n[5]||(n[5]=e=>_(k)?k.value=e:null),label:"Chọn để tìm kiếm theo thời gian"},null,8,["modelValue"]),u(x,{class:"icon","append-icon":"mdi-magnify",onClick:n[6]||(n[6]=e=>Y())},{default:g(()=>[D(" Tìm Kiếm ")]),_:1})]),t("div",Bt,[t("table",Pt,[$t,t("tbody",Lt,[(p(!0),N(E,null,dt(s(z),e=>(p(),N("tr",{key:e._id,class:"row"},[t("td",At,i(s(yt)(e.createdAt)),1),t("td",Gt,i(e.nickname),1),t("td",Ut,i(e.accountNumberClient),1),t("td",Kt,i(e.bankClient?nt(e.bankClient):""),1),t("td",Et,i(e.transId),1),t("td",Ot,i(Number(e.amount).toLocaleString()),1),t("td",Mt,i(Number(e.bonus).toLocaleString()),1),t("td",Ft,i(e.detailGameName),1),t("td",Rt,[t("span",jt,i(e.code),1)]),t("td",qt,[t("span",zt,i(e.betValue),1)]),t("td",Qt,[t("span",{class:mt(["result -lose",{"-win":e.status==="win"}])},i(e.status),3)]),t("td",Yt,i(e.paymentStatus?"Đã Thanh Toán ":"Chưa Thanh Toán"),1),t("td",Jt,[e.paymentStatus?w("",!0):(p(),H(x,{key:0,class:"payment",variant:"outlined",onClick:ot=>X(e)},{default:g(()=>[D(" Payment ")]),_:2},1032,["onClick"]))]),t("td",Wt,[!e.paymentStatus&&tt.includes(e.status)?(p(),H(x,{key:0,class:"payment",variant:"outlined",onClick:ot=>et(e)},{default:g(()=>[D(" Detect ")]),_:2},1032,["onClick"])):w("",!0)])]))),128))])]),t("div",Xt,[s(Q)?(p(),H(St,{key:0,modelValue:s(c),"onUpdate:modelValue":n[7]||(n[7]=e=>_(c)?c.value=e:null),length:s(I),rounded:"circle","prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])):w("",!0)])]),u(bt,{modelValue:s(y),"onUpdate:modelValue":n[8]||(n[8]=e=>_(y)?y.value=e:null),timeout:1e3,rounded:"pill",location:"top",color:s(J)||s(W)?"success":"red",elevation:"24",transition:"fade-transition"},{default:g(()=>[t("div",Zt,i(s(B)),1)]),_:1},8,["modelValue","color"]),u(L,{action:s(P),content:s($),onPayment:Z,onDetect:at},null,8,["action","content"])],64)}}});const ee=j(te,[["__scopeId","data-v-4a250de7"]]),ae={class:"transaction-container"},ne={class:"history"},se=R({__name:"index",setup(T){o({code:"VCB",shortName:"(970436) Vietcombank"}),o(1e5),o("hongha T");const l=kt();d(()=>l.isHandleTransactionSuccess),d(()=>l.isHandleTransactionFail),o(!1),F();const c=o(!1),v=d(()=>c.value?"mdi-arrow-down":"mdi-arrow-up");return(r,C)=>{const m=ee;return p(),N("div",ae,[t("div",ne,[u(x,{class:"label","append-icon":s(v),variant:"text",onClick:C[0]||(C[0]=()=>c.value=!s(c))},{default:g(()=>[D(" Lịch sử giao dịch ")]),_:1},8,["append-icon"]),s(c)?w("",!0):(p(),H(m,{key:0}))])])}}});const Ae=j(se,[["__scopeId","data-v-381292dd"]]);export{Ae as default};
