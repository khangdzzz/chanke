import{_ as L}from"./nuxt-link.ad1b3ac5.js";import{y as N,z as b,aQ as I,r as d,a as f,o as g,A as h,u as c,N as M,B as s,am as T,K as v,L as k,D as S,t as x,C as w,x as p,G as U,H as K,I as A}from"./entry.75e5da12.js";import{u as D}from"./user.af85b64d.js";import{u as F}from"./app.91f587ac.js";import{u as q}from"./useAuth.7a69357a.js";import{_ as R}from"./logo_chanlebank1.7c457ddc.js";import{V as z}from"./VBtn.e95b6ffc.js";import"./rounded.42519ff8.js";import"./dimensions.828db36b.js";import"./router.bbe94cc5.js";import"./VIcon.54c6b0c4.js";const E=a=>(U("data-v-8d977cd4"),a=a(),K(),a),G={class:"login-container"},H={key:0,class:"fail"},O={class:"card"},Q=E(()=>s("a",{href:"/",class:"logo"},[s("img",{src:R,alt:""})],-1)),j=["onSubmit"],J={class:"register"},P=N({__name:"login",setup(a){b(()=>{localStorage.removeItem("accessToken")});const n=I(),i=d(""),r=d(""),o=D(),y=f(()=>o.isLoginSuccess),V=f(()=>o.isLoginFail),l=d(!1),B=F(),m=async()=>{l.value=!0;const _={username:i.value,password:r.value};if(await o.login(_),l.value=!1,y.value){const{checkTokenValid:e,checkUpdateBank:u,permission:t}=q();if(e())if(t.value==="admin"){n.push("/dashboard");return}else{const C=u();if(B.isOpenMenuBar=!1,!C){n.push("/bank-setting");return}n.push("/");return}n.push("/user/login"),o.isLoginSuccess=!1,o.isLoginFail=!1}};return(_,e)=>{const u=L;return g(),h("div",G,[c(V)?(g(),h("div",H,"Đang Nhập Không Thành Công")):M("",!0),s("div",O,[Q,s("form",{onSubmit:T(m,["prevent"]),class:"form"},[v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>S(i)?i.value=t:null),class:"username",type:"text",placeholder:"Nickname",required:""},null,512),[[k,c(i)]]),v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>S(r)?r.value=t:null),class:"password",type:"password",placeholder:"Mật Khẩu",required:""},null,512),[[k,c(r)]]),x(z,{type:"submit",class:"btn",loading:c(l),onClick:m},{default:w(()=>[p("Đăng Nhập")]),_:1},8,["loading"])],40,j),s("div",J,[p("Chưa có tài khoản? "),x(u,{class:"link",to:"/user/register"},{default:w(()=>[p("Đăng Ký!")]),_:1})])])])}}});const is=A(P,[["__scopeId","data-v-8d977cd4"]]);export{is as default};
