import{_ as be}from"./section.ce5e67cb.js";import{u as ge}from"./user.af85b64d.js";import{u as pe}from"./useAuth.7a69357a.js";import{B as le}from"./constants.d690964f.js";import{i as ye}from"./formatters.df209382.js";import{V as se}from"./VIcon.54c6b0c4.js";import{V as _e}from"./VSnackbar.2a38b56e.js";import{m as ke,V as Ve,a as xe}from"./VSelect.a3098a1a.js";import{f as Ce}from"./VOverlay.8d6a580d.js";import{p as ie,a as F,r as M,w as Ne,u as S,b as ce,e as we,f as Ie,h as Fe,i as Se,s as G,j as ae,k as Me,l as z,m as ne,q as Ue,t as u,F as J,v as R,x as E,y as Te,z as Be,o as Ke,A as Ae,B as N,C as ue,D as $,E as De,G as Le,H as Pe,I as Re}from"./entry.75e5da12.js";import{m as Ee}from"./transition.20c87304.js";import{u as Oe,t as Q,V as je,a as oe}from"./VList.8d44b97f.js";import{m as He,u as Ge,V as W}from"./VTextField.da37b349.js";import{V as ze}from"./VChip.bef1ff08.js";import{V as $e}from"./dimensions.828db36b.js";import{V as Qe}from"./VBtn.e95b6ffc.js";import"./game.8b2c37cb.js";import"./rounded.42519ff8.js";import"./dialog-transition.a9096680.js";import"./router.bbe94cc5.js";import"./index.bc80bfbd.js";import"./ssrBoot.a1982877.js";import"./VAvatar.727a47c0.js";import"./VImg.1fb1b266.js";import"./index.fcb5bc87.js";const Je=(e,o,l)=>e==null||o==null?-1:e.toString().toLocaleLowerCase().indexOf(o.toString().toLocaleLowerCase()),We=ie({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Xe(e,o,l){var f;const a=[],U=(l==null?void 0:l.default)??Je,d=l!=null&&l.filterKeys?ce(l.filterKeys):!1,i=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return a;e:for(let c=0;c<e.length;c++){const y=e[c],v={},n={};let m=-1;if(o&&!(l!=null&&l.noFilter)){if(typeof y=="object"){const h=d||Object.keys(y);for(const I of h){const b=we(y,I,y),K=(f=l==null?void 0:l.customKeyFilter)==null?void 0:f[I];if(m=K?K(b,o,y):U(b,o,y),m!==-1&&m!==!1)K?v[I]=m:n[I]=m;else if((l==null?void 0:l.filterMode)==="every")continue e}}else m=U(y,o,y),m!==-1&&m!==!1&&(n.title=m);const w=Object.keys(n).length,_=Object.keys(v).length;if(!w&&!_||(l==null?void 0:l.filterMode)==="union"&&_!==i&&!w||(l==null?void 0:l.filterMode)==="intersection"&&(_!==i||!w))continue}a.push({index:c,matches:{...n,...v}})}return a}function Ye(e,o,l,a){const U=F(()=>typeof(l==null?void 0:l.value)!="string"&&typeof(l==null?void 0:l.value)!="number"?"":String(l.value)),d=M([]),i=M(new Map);Ne(()=>{d.value=[],i.value=new Map;const c=S(o);Xe(c,U.value,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:S(a==null?void 0:a.filterKeys)??e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}).forEach(v=>{let{index:n,matches:m}=v;const w=c[n];d.value.push(w),i.value.set(w.value,m)})});function f(c){return i.value.get(c.value)}return{filteredItems:d,filteredMatches:i,getMatches:f}}function Ze(e,o,l){if(o==null)return e;if(Array.isArray(o))throw new Error("Multiple matches is not implemented");return typeof o=="number"&&~o?u(J,null,[u("span",{class:"v-combobox__unmask"},[e.substr(0,o)]),u("span",{class:"v-combobox__mask"},[e.substr(o,l)]),u("span",{class:"v-combobox__unmask"},[e.substr(o+l)])]):e}const qe=ie({delimiters:Array,...We({filterKeys:["title"]}),...ke({hideNoData:!0,returnObject:!0}),...Ie(He({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Ee({transition:!1})},"v-combobox"),et=Fe()({name:"VCombobox",props:qe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,o){var te;let{emit:l,slots:a}=o;const{t:U}=Se(),d=M(),i=G(!1),f=G(!0),c=M(),y=ae(e,"menu"),v=F({get:()=>y.value,set:t=>{var r;y.value&&!t&&((r=c.value)!=null&&r.ΨopenChildren)||(y.value=t)}}),n=G(-1);let m=!1;const w=F(()=>{var t;return(t=d.value)==null?void 0:t.color}),{items:_,transformIn:h,transformOut:I}=Oe(e),{textColorClasses:b,textColorStyles:K}=Me(w),p=ae(e,"modelValue",[],t=>h(ce(t)),t=>{const r=I(t);return e.multiple?r:r[0]??null}),T=Ge(),L=G(e.multiple?"":((te=p.value[0])==null?void 0:te.title)??""),k=F({get:()=>L.value,set:t=>{var r;if(L.value=t,e.multiple||(p.value=[Q(e,t)]),t&&e.multiple&&((r=e.delimiters)!=null&&r.length)){const V=t.split(new RegExp(`(?:${e.delimiters.join("|")})+`));V.length>1&&(V.forEach(B=>{B=B.trim(),B&&D(Q(e,B))}),L.value="")}t||(n.value=-1),f.value=!t}});z(L,t=>{m?ne(()=>m=!1):i.value&&!v.value&&(v.value=!0),l("update:search",t)}),z(p,t=>{var r;e.multiple||(L.value=((r=t[0])==null?void 0:r.title)??"")});const{filteredItems:O,getMatches:re}=Ye(e,_,F(()=>f.value?void 0:k.value)),A=F(()=>p.value.map(t=>_.value.find(r=>e.valueComparator(r.value,t.value))||t)),Y=F(()=>e.hideSelected?O.value.filter(t=>!A.value.some(r=>r.value===t.value)):O.value),Z=F(()=>A.value.map(t=>t.props.value)),ee=F(()=>A.value[n.value]),q=M();function de(t){m=!0,e.openOnClear&&(v.value=!0)}function ve(){e.hideNoData&&!_.value.length||e.readonly||T!=null&&T.isReadonly.value||(v.value=!0)}function fe(t){var B,s;if(e.readonly||T!=null&&T.isReadonly.value)return;const r=d.value.selectionStart,V=Z.value.length;if((n.value>-1||["Enter","ArrowDown","ArrowUp"].includes(t.key))&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(v.value=!0),["Escape"].includes(t.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(t.key)&&(f.value=!0),t.key==="ArrowDown"?(B=q.value)==null||B.focus("next"):t.key==="ArrowUp"&&((s=q.value)==null||s.focus("prev")),!!e.multiple){if(["Backspace","Delete"].includes(t.key)){if(n.value<0){t.key==="Backspace"&&!k.value&&(n.value=V-1);return}const g=n.value;ee.value&&D(ee.value),n.value=g>=V-1?V-2:g}if(t.key==="ArrowLeft"){if(n.value<0&&r>0)return;const g=n.value>-1?n.value-1:V-1;A.value[g]?n.value=g:(n.value=-1,d.value.setSelectionRange(k.value.length,k.value.length))}if(t.key==="ArrowRight"){if(n.value<0)return;const g=n.value+1;A.value[g]?n.value=g:(n.value=-1,d.value.setSelectionRange(0,0))}t.key==="Enter"&&k.value&&(D(Q(e,k.value)),k.value="")}}function me(){var t;i.value&&(f.value=!0,(t=d.value)==null||t.focus())}function D(t){if(e.multiple){const r=Z.value.findIndex(V=>e.valueComparator(V,t.value));if(r===-1)p.value=[...p.value,t];else{const V=[...p.value];V.splice(r,1),p.value=V}k.value=""}else p.value=[t],L.value=t.title,ne(()=>{v.value=!1,f.value=!0})}function he(t){i.value=!0}return z(O,t=>{!t.length&&e.hideNoData&&(v.value=!1)}),z(i,t=>{t||(n.value=-1,v.value=!1,!(!e.multiple||!k.value)&&(p.value=[...p.value,Q(e,k.value)],k.value=""))}),Ue(()=>{const t=!!(e.chips||a.chip),r=!!(!e.hideNoData||Y.value.length||a.prepend||a.append||a["no-data"]),V=p.value.length>0,[B]=W.filterProps(e);return u(W,R({ref:d},B,{modelValue:k.value,"onUpdate:modelValue":[s=>k.value=s,s=>{s==null&&(p.value=[])}],focused:i.value,"onUpdate:focused":s=>i.value=s,validationValue:p.externalValue,dirty:V,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!e.chips,"v-combobox--selecting-index":n.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,appendInnerIcon:e.items.length?e.menuIcon:void 0,readonly:e.readonly,placeholder:V?void 0:e.placeholder,"onClick:clear":de,"onMousedown:control":ve,onKeydown:fe}),{...a,default:()=>u(J,null,[u(Ve,R({ref:c,modelValue:v.value,"onUpdate:modelValue":s=>v.value=s,activator:"parent",contentClass:"v-combobox__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:me},e.menuProps),{default:()=>[r&&u(je,{ref:q,selected:Z.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onFocusin:he},{default:()=>{var s,g,j;return[!Y.value.length&&!e.hideNoData&&(((s=a["no-data"])==null?void 0:s.call(a))??u(oe,{title:U(e.noDataText)},null)),(g=a["prepend-item"])==null?void 0:g.call(a),Y.value.map(x=>{var P;return((P=a.item)==null?void 0:P.call(a,{item:x,props:R(x.props,{onClick:()=>D(x)})}))??u(oe,R({key:x.value},x.props,{onClick:()=>D(x)}),{prepend:C=>{let{isSelected:H}=C;return u(J,null,[e.multiple&&!e.hideSelected?u(xe,{modelValue:H,ripple:!1,tabindex:"-1"},null):void 0,x.props.prependIcon&&u(se,{icon:x.props.prependIcon},null)])},title:()=>{var C,H;return f.value?x.title:Ze(x.title,(C=re(x))==null?void 0:C.title,((H=k.value)==null?void 0:H.length)??0)}})}),(j=a["append-item"])==null?void 0:j.call(a)]}})]}),A.value.map((s,g)=>{var P;function j(C){C.stopPropagation(),C.preventDefault(),D(s)}const x={"onClick:close":j,onMousedown(C){C.preventDefault(),C.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:s.value,class:["v-combobox__selection",g===n.value&&["v-combobox__selection--selected",b.value]],style:g===n.value?K.value:{}},[t?a.chip?u($e,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:s.title}}},{default:()=>{var C;return[(C=a.chip)==null?void 0:C.call(a,{item:s,index:g,props:x})]}}):u(ze,R({key:"chip",closable:e.closableChips,size:"small",text:s.title},x),null):((P=a.selection)==null?void 0:P.call(a,{item:s,index:g}))??u("span",{class:"v-combobox__selection-text"},[s.title,e.multiple&&g<A.value.length-1&&u("span",{class:"v-combobox__selection-comma"},[E(",")])])])})])})}),Ce({isFocused:i,isPristine:f,menu:v,search:k,selectionIndex:n,filteredItems:O,select:D},d)}}),X=e=>(Le("data-v-fa9c3773"),e=e(),Pe(),e),tt={class:"bank-setting"},lt={class:"setting"},at={class:"title"},nt={class:"register-account"},ut={style:{width:"100%","text-align":"center"}},ot={class:"bank"},st=X(()=>N("span",{class:"label"},"Ngân hàng nhận thưởng",-1)),it={class:"accountNumber"},ct=X(()=>N("span",{class:"label"},"Số tài khoản ngân hàng",-1)),rt={class:"accountNumber"},dt=X(()=>N("span",{class:"label"},"Tên tài khoản ngân hàng",-1)),vt=X(()=>N("span",{class:"confirm"},[E(" LƯU Ý: TÀI KHOẢN BANK CỦA BẠN TỰ ĐỘNG Ở CHẾ ĐỘ "),N("span",{class:"note"},"  BẢO VỆ "),E(" SAU LẦN TRẢ THƯỞNG THÀNH CÔNG ĐẦU TIÊN. ")],-1)),ft=Te({__name:"index",setup(e){var m,w;const o=M(""),l=M(!1),a=ge(),{getUserName:U}=pe(),d=F(()=>a.authUser),i=M({value:"970415",label:"(970415) VietinBank"}),f=M((m=d.value)==null?void 0:m.accountNumber),c=M((w=d.value)==null?void 0:w.accountName);Be(async()=>{var _,h,I,b,K;await a.getDetailUser(U()),f.value=((_=d.value)==null?void 0:_.accountNumber)||"",c.value=((h=d.value)==null?void 0:h.accountName)||"",i.value=(I=d.value)!=null&&I.bankcode?{value:(b=d.value)==null?void 0:b.bankcode,label:(K=le.find(p=>{var T;return p.value===((T=d.value)==null?void 0:T.bankcode)}))==null?void 0:K.label}:{value:"970415",label:"(970415) VietinBank"}});const y=async()=>{if(!i.value.value||!c.value||!f.value){o.value="Vui lòng nhập đầy đủ thông tin tài khoản bank",l.value=!0;return}const _={username:U(),bankcode:i.value.value,accountNumber:f.value,accountName:c.value};await a.updateUser(_),o.value=a.isUpdated?"Cập Nhật Tài Khoản Bank Thành Công":"Cập Nhật Tài Khoản Bank Thất Bại",l.value=!0},v=F(()=>a.isUpdated),n=_=>{c.value=_.target.value.toUpperCase(),c.value=c.value.normalize("NFD").replace(/[\u0300-\u036f]/g,"")};return(_,h)=>{const I=be;return Ke(),Ae(J,null,[N("div",tt,[u(I)]),N("div",lt,[N("h3",at,[u(se,{class:"icon",icon:"mdi-wrench-cog-outline"}),E(" CÀI ĐẶT BANK TRẢ THƯỞNG ")]),N("form",nt,[u(_e,{modelValue:S(l),"onUpdate:modelValue":h[0]||(h[0]=b=>$(l)?l.value=b:null),timeout:1e3,rounded:"pill",location:"top",color:S(v)?"success":"red",elevation:"24",transition:"fade-transition"},{default:ue(()=>[N("div",ut,De(S(o)),1)]),_:1},8,["modelValue","color"]),N("div",ot,[st,u(et,{modelValue:S(i),"onUpdate:modelValue":h[1]||(h[1]=b=>$(i)?i.value=b:null),items:S(le),"item-value":"value","item-title":"label",variant:"outlined",class:"combobox",dense:""},null,8,["modelValue","items"])]),N("div",it,[ct,u(W,{modelValue:S(f),"onUpdate:modelValue":h[2]||(h[2]=b=>$(f)?f.value=b:null),class:"text",variant:"outlined",dense:"",onKeypress:h[3]||(h[3]=b=>S(ye)(b))},null,8,["modelValue"])]),N("div",rt,[dt,u(W,{modelValue:S(c),"onUpdate:modelValue":h[4]||(h[4]=b=>$(c)?c.value=b:null),class:"text",variant:"outlined",dense:"",onInput:n},null,8,["modelValue"])]),u(Qe,{class:"submit",onClick:y},{default:ue(()=>[E("Cập Nhật")]),_:1})]),vt])],64)}}});const Rt=Re(ft,[["__scopeId","data-v-fa9c3773"]]);export{Rt as default};
