import{y as te,r as s,z as ae,a as E,l as $,o as u,A as v,B as t,K as le,L as se,u as o,D as p,t as d,F as N,M as F,c as oe,N as ne,C as g,E as r,x as b,G as ie,H as de,I as ce}from"./entry.75e5da12.js";import{u as ue}from"./user.af85b64d.js";import{B as M}from"./constants.d690964f.js";import{f as re,i as me}from"./formatters.df209382.js";import{r as ve}from"./index.a35aaa61.js";import{V as pe}from"./VIcon.54c6b0c4.js";import{V as _e}from"./VPagination.3e781616.js";import{V as fe}from"./VSnackbar.2a38b56e.js";import{V as C}from"./VBtn.e95b6ffc.js";import{V as L}from"./VTextField.da37b349.js";import{b as xe}from"./VSelect.a3098a1a.js";import"./rounded.42519ff8.js";import"./VOverlay.8d6a580d.js";import"./dimensions.828db36b.js";import"./router.bbe94cc5.js";import"./transition.20c87304.js";import"./index.bc80bfbd.js";import"./index.fcb5bc87.js";import"./VList.8d44b97f.js";import"./ssrBoot.a1982877.js";import"./VAvatar.727a47c0.js";import"./VImg.1fb1b266.js";import"./dialog-transition.a9096680.js";import"./VChip.bef1ff08.js";const H=k=>(ie("data-v-d042185c"),k=k(),de(),k),he={class:"container-player"},Ue={class:"search-user"},Ve={class:"table-manager"},ge={class:"table"},be={class:"header"},ke={class:"row"},we=["width"],ye={class:"body"},Ne={class:"cell -text"},Ce={class:"field -text"},Ae={class:"cell -text"},Te={class:"field -text"},Be={class:"cell -text"},Se={class:"field -text"},Ie={class:"cell -text"},De={class:"field -text"},Ee={class:"cell -text"},Le={class:"field -text"},Ke={class:"cell -text"},Pe=H(()=>t("span",null,"|",-1)),$e={class:"cell -text"},Fe={class:"field -text"},Me={class:"cell -text"},He={class:"cell -text"},je={class:"cell -text"},ze={class:"cell -text"},Ge=H(()=>t("span",null,"|",-1)),Re={class:"text-center"},qe=te({__name:"index",setup(k){const j=s([{id:1,text:"Thời gian",width:"15%"},{id:2,text:"User Name",width:"15%"},{id:3,text:"Tên Tài Khoản",width:"20%"},{id:4,text:"Số Tài Khoản",width:"15%"},{id:5,text:"Ngân Hàng",width:"18%"},{id:6,text:"Thao Tác",width:"17%"}]),i=ue(),c=s(1),f=s(10);ae(async()=>{await i.getAllUsers(c.value,f.value)});const z=E(()=>{var e;return(e=i.containerUsers)==null?void 0:e.users}),A=E(()=>{var e;return(e=i.containerUsers)==null?void 0:e.totalPages}),G=E(()=>A.value?A.value>1:!1),K=s(""),w=s(!1),R=e=>K.value===e&&w.value,P=e=>M.find(a=>a.value===e)??{value:"",label:""},m=s(""),_=s(""),x=s(""),h=s({value:"",label:""});$(m,e=>{m.value=ve(e)});const q=e=>{w.value=!0,K.value=e.username,m.value=e.username,_.value=e.accountName||"",x.value=e.accountNumber||"",h.value=e.bankcode?P(e.bankcode):{value:"",label:""}},y=s(!1),T=s(""),J=e=>T.value===e&&y.value,B=s(!1),U=s(!1),S=s(""),O=async e=>{T.value=e.username,y.value=!0;const a={username:e.username,accountName:_.value,accountNumber:x.value,bankcode:h.value.value};if(await i.updateUser(a),await i.getAllUsers(c.value,f.value),i.isUpdated)B.value=!0,S.value="Cập nhật thành công",U.value=!0;else{B.value=!1,S.value="Cập nhật thất bại, check lại internet or nickname đã tồn tại",U.value=!0,y.value=!1;return}setTimeout(()=>{w.value=!1,y.value=!1,T.value=""},1e3)},I=s(""),D=s(!1),Q=e=>I.value===e&&D.value,W=async e=>{I.value=e.username,D.value=!0,await i.deleteUser(e.username),await i.getAllUsers(c.value,f.value),setTimeout(()=>{D.value=!1,I.value=""},500)},X=e=>{_.value=e.target.value.toUpperCase()},Y=e=>{m.value=e.target.value.toLowerCase()},V=s(""),Z=async()=>{const e=V.value?`&username=${V.value}`:"";await i.getAllUsers(c.value,f.value,e)};return $(c,async()=>{await i.getAllUsers(c.value,f.value)}),(e,a)=>(u(),v("div",he,[t("div",Ue,[le(t("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>p(V)?V.value=l:null),class:"input",type:"text",placeholder:"Nhập nick name để tìm kiếm"},null,512),[[se,o(V)]]),d(pe,{class:"icon",icon:"mdi-magnify",onClick:a[1]||(a[1]=l=>Z())})]),t("div",Ve,[t("table",ge,[t("thead",be,[t("tr",ke,[(u(!0),v(N,null,F(o(j),l=>(u(),v("th",{width:l.width,key:l.id,class:"head"},r(l.text),9,we))),128))])]),t("tbody",ye,[(u(!0),v(N,null,F(o(z),(l,ee)=>(u(),v("tr",{key:ee,class:"row"},[R(l.username)?(u(),v(N,{key:1},[t("td",$e,[t("span",Fe,r(l.createdAt),1)]),t("td",Me,[d(L,{modelValue:o(m),"onUpdate:modelValue":a[2]||(a[2]=n=>p(m)?m.value=n:null),class:"field -text",onInput:Y},null,8,["modelValue"])]),t("td",He,[d(L,{modelValue:o(_),"onUpdate:modelValue":a[3]||(a[3]=n=>p(_)?_.value=n:null),class:"field -text",onInput:X},null,8,["modelValue"])]),t("td",je,[d(L,{modelValue:o(x),"onUpdate:modelValue":a[4]||(a[4]=n=>p(x)?x.value=n:null),class:"field -text",onKeypress:a[5]||(a[5]=n=>o(me)(n))},null,8,["modelValue"])]),t("td",null,[d(xe,{modelValue:o(h),"onUpdate:modelValue":a[6]||(a[6]=n=>p(h)?h.value=n:null),items:o(M),"item-value":"value","item-title":"label",variant:"outlined",class:"row",dense:"",clearable:!1,"return-object":""},null,8,["modelValue","items"])]),t("td",ze,[d(C,{class:"button -update",variant:"text",onClick:n=>O(l),loading:J(l.username)},{default:g(()=>[b(" Update ")]),_:2},1032,["onClick","loading"]),Ge,d(C,{class:"button -cancel",variant:"text",onClick:a[7]||(a[7]=()=>w.value=!1)},{default:g(()=>[b(" Cancel ")]),_:1})])],64)):(u(),v(N,{key:0},[t("td",Ne,[t("span",Ce,r(o(re)(l.createdAt)),1)]),t("td",Ae,[t("span",Te,r(l.username),1)]),t("td",Be,[t("span",Se,r(l.accountName),1)]),t("td",Ie,[t("span",De,r(l.accountNumber),1)]),t("td",Ee,[t("span",Le,r(l.bankcode?P(l.bankcode).label:""),1)]),t("td",Ke,[d(C,{class:"button -edit",variant:"text",onClick:n=>q(l)},{default:g(()=>[b(" Edit ")]),_:2},1032,["onClick"]),Pe,d(C,{class:"button -delete",variant:"text",loading:Q(l.username),onClick:n=>W(l)},{default:g(()=>[b(" Delete ")]),_:2},1032,["loading","onClick"])])],64))]))),128))])])]),t("div",Re,[o(G)?(u(),oe(_e,{key:0,modelValue:o(c),"onUpdate:modelValue":a[8]||(a[8]=l=>p(c)?c.value=l:null),length:o(A),rounded:"circle","prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])):ne("",!0)]),d(fe,{modelValue:o(U),"onUpdate:modelValue":a[9]||(a[9]=l=>p(U)?U.value=l:null),timeout:1e3,rounded:"pill",location:"top",color:o(B)?"success":"red",elevation:"24",transition:"fade-transition"},{default:g(()=>[b(r(o(S)),1)]),_:1},8,["modelValue","color"])]))}});const xt=ce(qe,[["__scopeId","data-v-d042185c"]]);export{xt as default};
