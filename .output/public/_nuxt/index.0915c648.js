import{_ as lt}from"./confirm-handle-transaction.fa2e8491.js";import{u as R}from"./transaction.d91f5d8f.js";import{y as z,r as o,z as ct,a as u,l as it,o as p,A as N,B as t,t as _,u as s,D as m,K,L as O,C as g,x as D,F as M,M as rt,E as i,O as ut,c as H,N as I,G as dt,H as mt,I as j}from"./entry.75e5da12.js";import{u as _t}from"./game.8b2c37cb.js";import{u as pt}from"./app.91f587ac.js";import{g as vt,e as ht,f as Tt}from"./formatters.df209382.js";import{K as F}from"./vue-datepicker.a5e458f6.js";/* empty css             */import{B as yt}from"./constants.d690964f.js";import{b as ft}from"./VSelect.a3098a1a.js";import{V as gt}from"./VCheckbox.a8fa212b.js";import{V as x}from"./VBtn.e95b6ffc.js";import{V as Ct}from"./VPagination.3e781616.js";import{V as St}from"./VSnackbar.2a38b56e.js";import{u as kt}from"./admin.9cf31106.js";import"./VDialog.eedd4603.js";import"./VAvatar.727a47c0.js";import"./rounded.42519ff8.js";import"./VImg.1fb1b266.js";import"./index.fcb5bc87.js";import"./transition.20c87304.js";import"./dimensions.828db36b.js";import"./VIcon.54c6b0c4.js";import"./router.bbe94cc5.js";import"./VOverlay.8d6a580d.js";import"./dialog-transition.a9096680.js";import"./VTextField.da37b349.js";import"./index.bc80bfbd.js";import"./VList.8d44b97f.js";import"./ssrBoot.a1982877.js";import"./VChip.bef1ff08.js";const G=h=>(dt("data-v-b72e190e"),h=h(),mt(),h),Vt={class:"search-user"},bt={class:"content__item"},Nt=G(()=>t("div",{class:"content__item__title"},"Thời Gian Bắt Đầu",-1)),Dt={class:"content__item__input"},Ht={class:"content__item"},It=G(()=>t("div",{class:"content__item__title"},"Thời Gian Kết Thúc",-1)),xt={class:"content__item__input"},wt={class:"container-search"},Pt={class:"table"},$t=G(()=>t("thead",{class:"head"},[t("tr",{class:"row"},[t("th",{class:"cell"},"THỜI GIAN"),t("th",{class:"cell"},"Nick Name"),t("th",{class:"cell"},"Số Tài Khoản"),t("th",{class:"cell"},"Ngân Hàng"),t("th",{class:"cell"},"MGD"),t("th",{class:"cell"},"TIỀN CƯỢC"),t("th",{class:"cell"},"TIỀN THẮNG"),t("th",{class:"cell"},"TRÒ CHƠI"),t("th",{class:"cell"},"MESSAGE"),t("th",{class:"cell"},"CƯỢC"),t("th",{class:"cell"},"KẾT QUẢ"),t("th",{class:"cell"},"TRẠNG THÁI THANH TOÁN TIỀN"),t("th",{class:"cell"},"CALLBACK"),t("th",{class:"cell"},"DETECT")])],-1)),Bt={class:"body"},Lt={class:"cell"},Gt={class:"cell"},At={class:"cell"},Ut={class:"cell"},Et={class:"cell"},Kt={class:"cell"},Ot={class:"cell"},Mt={class:"cell"},Ft={class:"cell"},Rt={class:"betName"},zt={class:"cell"},jt={class:"betName"},qt={class:"cell"},Qt={class:"cell"},Yt={class:"cell"},Jt={class:"cell"},Wt={class:"text-center"},Xt={style:{width:"100%","text-align":"center"}},Zt=z({__name:"section",setup(h){const l=R(),c=o(1),v=50,r=o("");ct(async()=>{await l.getHistoryTransactionLatest(r.value,c.value,v)});const C=_t(),d=o({gameType:"",name:"Tất cả"}),q=u(()=>[d.value,...C.listGamesDetail]),Q=u(()=>{var a;return(a=l.historyTransactionLatest)==null?void 0:a.transactions}),w=u(()=>{var a;return(a=l.historyTransactionLatest)==null?void 0:a.totalPages}),Y=u(()=>w.value?w.value>1:!1),T=o(""),y=o(""),S=o(vt()),k=o(ht()),V=o(!1),J=async()=>{r.value="",r.value+=T.value?`&nickname=${T.value}`:"",r.value+=y.value?`&transactionId=${y.value}`:"",r.value+=d.value.gameType?`&gameName=${d.value.gameType}`:"",V.value&&(r.value+=`&startDate=${S.value.toISOString()}`,r.value+=`&endDate=${k.value.toISOString()}`),c.value=1,await l.getHistoryTransactionLatest(r.value,c.value,v)};it(c,async()=>{await l.getHistoryTransactionLatest(r.value,c.value,v)});const P=o(""),f=o(!1),W=u(()=>l.isCallPaymentSuccess),X=u(()=>l.isDetectTransactionSuccess),b=pt(),$=o(""),B=o(""),A=o(""),U=o(""),Z=async a=>{b.isOpenConfirmHandleTransaction=!0,$.value="PAYMENT",B.value=`${a.nickname} (${a.bonus})`,A.value=a.nickname,U.value=a.transId},tt=async()=>{const a=A.value,n=U.value;await l.callBackPayment(a,n),await l.getHistoryTransactionLatest(r.value,c.value,v),b.isOpenConfirmHandleTransaction=!1,P.value=l.isCallPaymentSuccess?"Thanh Toán Thành Công":"Thanh Toán Thất Bại, Số tiền quá nhỏ or user không tồn tại",f.value=!0},et=["Code format invalid","Game not found","User not found"],E=o(""),at=a=>{b.isOpenConfirmHandleTransaction=!0,$.value="DETECT",B.value=a.nickname?`${a.nickname} (${a.bonus})`:a.betValue,E.value=a.transId},nt=async()=>{const a={transaction_id:E.value};await l.detectTransaction(a),await l.getHistoryTransactionLatest(r.value,c.value,v),b.isOpenConfirmHandleTransaction=!1,P.value=l.isDetectTransactionSuccess?"Detect Thành Công":"Detect Thành Thất Bại",f.value=!0},st=a=>{var n;return((n=yt.find(L=>L.value==a))==null?void 0:n.label)??""};return o(),(a,n)=>{const L=lt;return p(),N(M,null,[t("div",Vt,[_(ft,{modelValue:s(d),"onUpdate:modelValue":n[0]||(n[0]=e=>m(d)?d.value=e:null),items:s(q),"item-value":"gameType","item-title":"name",variant:"outlined",label:"Loại Game",class:"games",dense:"",clearable:!1,"return-object":""},null,8,["modelValue","items"]),K(t("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>m(T)?T.value=e:null),class:"input",type:"text",placeholder:"Nhập Nickname để kiểm tra"},null,512),[[O,s(T)]]),K(t("input",{"onUpdate:modelValue":n[2]||(n[2]=e=>m(y)?y.value=e:null),class:"input",type:"text",placeholder:"Nhập mã giao dịch để kiểm tra"},null,512),[[O,s(y)]]),t("div",bt,[Nt,t("div",Dt,[_(s(F),{modelValue:s(S),"onUpdate:modelValue":n[3]||(n[3]=e=>m(S)?S.value=e:null)},null,8,["modelValue"])])]),t("div",Ht,[It,t("div",xt,[_(s(F),{modelValue:s(k),"onUpdate:modelValue":n[4]||(n[4]=e=>m(k)?k.value=e:null)},null,8,["modelValue"])])]),_(gt,{modelValue:s(V),"onUpdate:modelValue":n[5]||(n[5]=e=>m(V)?V.value=e:null),label:"Chọn để tìm kiếm theo thời gian"},null,8,["modelValue"]),_(x,{class:"icon","append-icon":"mdi-magnify",onClick:n[6]||(n[6]=e=>J())},{default:g(()=>[D(" Tìm Kiếm ")]),_:1})]),t("div",wt,[t("table",Pt,[$t,t("tbody",Bt,[(p(!0),N(M,null,rt(s(Q),e=>(p(),N("tr",{key:e._id,class:"row"},[t("td",Lt,i(s(Tt)(e.createdAt)),1),t("td",Gt,i(e.nickname),1),t("td",At,i(e.accountNumberClient),1),t("td",Ut,i(e.bankClient?st(e.bankClient):""),1),t("td",Et,i(e.transId),1),t("td",Kt,i(Number(e.amount).toLocaleString()),1),t("td",Ot,i(Number(e.bonus).toLocaleString()),1),t("td",Mt,i(e.detailGameName),1),t("td",Ft,[t("span",Rt,i(e.code),1)]),t("td",zt,[t("span",jt,i(e.betValue),1)]),t("td",qt,[t("span",{class:ut(["result -lose",{"-win":e.status==="win"}])},i(e.status),3)]),t("td",Qt,i(e.paymentStatus?"Đã Thanh Toán ":"Chưa Thanh Toán"),1),t("td",Yt,[e.paymentStatus?I("",!0):(p(),H(x,{key:0,class:"payment",variant:"outlined",onClick:ot=>Z(e)},{default:g(()=>[D(" Payment ")]),_:2},1032,["onClick"]))]),t("td",Jt,[!e.paymentStatus&&et.includes(e.status)?(p(),H(x,{key:0,class:"payment",variant:"outlined",onClick:ot=>at(e)},{default:g(()=>[D(" Detect ")]),_:2},1032,["onClick"])):I("",!0)])]))),128))])]),t("div",Wt,[s(Y)?(p(),H(Ct,{key:0,modelValue:s(c),"onUpdate:modelValue":n[7]||(n[7]=e=>m(c)?c.value=e:null),length:s(w),rounded:"circle","prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])):I("",!0)])]),_(St,{modelValue:s(f),"onUpdate:modelValue":n[8]||(n[8]=e=>m(f)?f.value=e:null),timeout:1e3,rounded:"pill",location:"top",color:s(W)||s(X)?"success":"red",elevation:"24",transition:"fade-transition"},{default:g(()=>[t("div",Xt,i(s(P)),1)]),_:1},8,["modelValue","color"]),_(L,{action:s($),content:s(B),onPayment:tt,onDetect:nt},null,8,["action","content"])],64)}}});const te=j(Zt,[["__scopeId","data-v-b72e190e"]]),ee={class:"transaction-container"},ae={class:"history"},ne=z({__name:"index",setup(h){o({code:"VCB",shortName:"(970436) Vietcombank"}),o(1e5),o("hongha T");const l=kt();u(()=>l.isHandleTransactionSuccess),u(()=>l.isHandleTransactionFail),o(!1),R();const c=o(!1),v=u(()=>c.value?"mdi-arrow-down":"mdi-arrow-up");return(r,C)=>{const d=te;return p(),N("div",ee,[t("div",ae,[_(x,{class:"label","append-icon":s(v),variant:"text",onClick:C[0]||(C[0]=()=>c.value=!s(c))},{default:g(()=>[D(" Lịch sử giao dịch ")]),_:1},8,["append-icon"]),s(c)?I("",!0):(p(),H(d,{key:0}))])])}}});const Le=j(ne,[["__scopeId","data-v-67e89c5b"]]);export{Le as default};
